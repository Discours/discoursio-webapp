---
import Zine from '../layouts/zine.astro'
import { Root } from '../components/Root'
import { apiClient } from '../utils/apiClient'
import { initRouter } from '../stores/router'

const chatrooms = await apiClient.getInboxes()

const { pathname, search } = Astro.url
initRouter(pathname, search)
---

<Zine>
  <Root chats={chatrooms} client:load />
</Zine>
